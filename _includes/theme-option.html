<div class="theme">
    <input type="checkbox" id="themeOption" class="themeCheck">
    <label for="themeOption"><i class="fas fa-sun" id="themeIcon"></i></label>
</div>
<script>
    var themeOption = document.getElementById('themeOption')
    var themeIcon = document.getElementById('themeIcon')
    if (themeOption) {
        initTheme()
        themeOption.addEventListener('change', function (event) {
            resetTheme()
        });

        function resetTheme() {
            if (themeOption.checked) {
                document.body.classList.toggle('dark')
                themeIcon.classList.replace("fa-sun", "fa-moon")
                localStorage.setItem('themeOption', 'dark')
            } else {
                document.body.classList.toggle('dark')
                themeIcon.classList.replace("fa-moon", "fa-sun")
                localStorage.removeItem('themeOption')
            }
        };
    }

    function initTheme() {
        var darkThemeSelected = (localStorage.getItem('themeOption') !== null && localStorage.getItem('themeOption') === 'dark');
        if (darkThemeSelected) {
            themeOption.checked = true
            themeIcon.classList.replace("fa-sun", "fa-moon")
            document.body.classList.toggle('dark')
        }
    }
</script>